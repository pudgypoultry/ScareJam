[gd_scene load_steps=16 format=3 uid="uid://chuuphnsyp1ya"]

[ext_resource type="PackedScene" uid="uid://dbcdka2dj638u" path="res://platform.tscn" id="1_mj6wr"]
[ext_resource type="PackedScene" uid="uid://bu67pvycyns0n" path="res://Scenes/Player/PlayerCharacter.tscn" id="2_lj2bt"]
[ext_resource type="Material" path="res://Scenes/Wall/WoodWall.tres" id="3_o6got"]
[ext_resource type="PackedScene" uid="uid://nbgvqs5qk2ul" path="res://Scenes/OilObject.tscn" id="5_e7yxb"]
[ext_resource type="Script" path="res://Scripts/MillHandler.gd" id="5_we673"]
[ext_resource type="PackedScene" uid="uid://1lgndh3n5yvk" path="res://Scenes/GrindableObject.tscn" id="6_ux84r"]
[ext_resource type="Script" path="res://Scripts/BreakableHandler.gd" id="7_4mut5"]

[sub_resource type="Environment" id="Environment_nkkkh"]
background_mode = 1
background_color = Color(0.453125, 0.453125, 0.453125, 1)
ambient_light_color = Color(1, 1, 1, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_vqgcn"]
size = Vector3(2, 0.1, 4)

[sub_resource type="BoxMesh" id="BoxMesh_mcs7m"]
size = Vector3(2, 0.1, 4)

[sub_resource type="CylinderShape3D" id="CylinderShape3D_c56yb"]

[sub_resource type="CylinderMesh" id="CylinderMesh_20xgo"]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_c20fj"]
height = 3.0
radius = 0.3

[sub_resource type="CylinderMesh" id="CylinderMesh_pugxc"]
top_radius = 0.2
bottom_radius = 0.2
height = 3.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_deinn"]
albedo_color = Color(0.325142, 1, 0, 1)

[node name="Node3D" type="Node3D"]

[node name="Floor" parent="." instance=ExtResource("1_mj6wr")]
collision_layer = 4
collision_mask = 4

[node name="Player" parent="." groups=["Lantern"] instance=ExtResource("2_lj2bt")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.23619, 1.51963, 0.641241)
grindableCount = 1
currentOilReward = 5.0
currentOilFillTime = 1.0
verticalCameraClamp = 60.0

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_nkkkh")

[node name="WallSegment" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 2.21796, -7.60318)
collision_layer = 3
collision_mask = 3

[node name="CollisionShape3D" type="CollisionShape3D" parent="WallSegment"]
shape = SubResource("BoxShape3D_vqgcn")

[node name="MeshInstance3D" type="MeshInstance3D" parent="WallSegment"]
mesh = SubResource("BoxMesh_mcs7m")
surface_material_override/0 = ExtResource("3_o6got")

[node name="FuelProcessor" type="StaticBody3D" parent="." node_paths=PackedStringArray("oilDestination", "collectibleOilObject") groups=["MillGrinder"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.76837e-07, 1.28923, -6.03307)
script = ExtResource("5_we673")
oilDestination = NodePath("OilLocation")
collectibleOilObject = NodePath("../OilCollection")

[node name="CollisionShape3D" type="CollisionShape3D" parent="FuelProcessor"]
shape = SubResource("CylinderShape3D_c56yb")

[node name="MeshInstance3D" type="MeshInstance3D" parent="FuelProcessor"]
mesh = SubResource("CylinderMesh_20xgo")

[node name="OilLocation" type="Marker3D" parent="FuelProcessor"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.01518, 0.354367, 0.119519)

[node name="GrindableObject2" parent="." instance=ExtResource("6_ux84r")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.10125, 0.361626, -5.76133)

[node name="GrindableObject3" parent="." instance=ExtResource("6_ux84r")]
transform = Transform3D(0.383103, 0, -0.923706, -0.115563, 0.992143, -0.0479293, 0.916448, 0.125108, 0.380093, -3.10125, 0.361626, -5.40763)

[node name="GrindableObject4" parent="." instance=ExtResource("6_ux84r")]
transform = Transform3D(0.954849, 0, 0.297092, 0, 1, 0, -0.297092, 0, 0.954849, -3.06899, 0.361626, -5.54052)

[node name="OilCollection" parent="." groups=["Breakable"] instance=ExtResource("5_e7yxb")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -17.311, 0)

[node name="GrindableObject5" parent="." instance=ExtResource("6_ux84r")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.10125, 0.361626, -5.76133)

[node name="BreakableObject" type="StaticBody3D" parent="." node_paths=PackedStringArray("grindableToProvide", "positionToInstantiate0", "positionToInstantiate1", "positionToInstantiate2") groups=["Breakable"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.56, 1.37366, -5.20795)
script = ExtResource("7_4mut5")
grindableToProvide = NodePath("../GrindableObjectSpawnGuy")
grindablesProvided = 3
positionToInstantiate0 = NodePath("Pos0")
positionToInstantiate1 = NodePath("Pos1")
positionToInstantiate2 = NodePath("Pos2")

[node name="CollisionShape3D" type="CollisionShape3D" parent="BreakableObject"]
shape = SubResource("CylinderShape3D_c20fj")

[node name="MeshInstance3D" type="MeshInstance3D" parent="BreakableObject"]
mesh = SubResource("CylinderMesh_pugxc")
surface_material_override/0 = SubResource("StandardMaterial3D_deinn")

[node name="Pos0" type="Marker3D" parent="BreakableObject"]
transform = Transform3D(0.402156, 0, -0.915571, 0, 1, 0, 0.915571, 0, 0.402156, 1.46297, -1.07092, 1.06176)

[node name="Pos1" type="Marker3D" parent="BreakableObject"]
transform = Transform3D(0.930379, 0, 0.366599, 0, 1, 0, -0.366599, 0, 0.930379, -0.357576, -1.07092, 0.865011)

[node name="Pos2" type="Marker3D" parent="BreakableObject"]
transform = Transform3D(-0.955849, 0, 0.293857, 0, 1, 0, -0.293857, 0, -0.955849, 0.536479, -1.07092, -0.395175)

[node name="GrindableObjectSpawnGuy" parent="." instance=ExtResource("6_ux84r")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -17.7917, 1.41052)
rotationOffset = Vector3(0, 0, 0)
scaleOffset = Vector3(1, 1, 1)
